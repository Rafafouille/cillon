<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>classes/CLASS-Schema.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Accroche.html">Accroche</a><ul class='methods'><li data-type='method'><a href="Accroche.html#autoSupprime">autoSupprime</a></li><li data-type='method'><a href="Accroche.html#classe">classe</a></li><li data-type='method'><a href="Accroche.html#consigneAngulaire">consigneAngulaire</a></li><li data-type='method'><a href="Accroche.html#couleur">couleur</a></li><li data-type='method'><a href="Accroche.html#demiSoeur">demiSoeur</a></li><li data-type='method'><a href="Accroche.html#epaisseur">epaisseur</a></li><li data-type='method'><a href="Accroche.html#genre">genre</a></li><li data-type='method'><a href="Accroche.html#getAbsoluteRotation">getAbsoluteRotation</a></li><li data-type='method'><a href="Accroche.html#k">k</a></li><li data-type='method'><a href="Accroche.html#kRot">kRot</a></li><li data-type='method'><a href="Accroche.html#L1L2">L1L2</a></li><li data-type='method'><a href="Accroche.html#L1S">L1S</a></li><li data-type='method'><a href="Accroche.html#longueurTige">longueurTige</a></li><li data-type='method'><a href="Accroche.html#nbDDL">nbDDL</a></li><li data-type='method'><a href="Accroche.html#O1L1">O1L1</a></li><li data-type='method'><a href="Accroche.html#pilotee">pilotee</a></li><li data-type='method'><a href="Accroche.html#rayon">rayon</a></li><li data-type='method'><a href="Accroche.html#remplisSysteme_liaison">remplisSysteme_liaison</a></li><li data-type='method'><a href="Accroche.html#updateCouleurGraphismes">updateCouleurGraphismes</a></li><li data-type='method'><a href="Accroche.html#updateEpaisseurGraphismes">updateEpaisseurGraphismes</a></li></ul></li><li><a href="Classe_Equivalence.html">Classe_Equivalence</a><ul class='methods'><li data-type='method'><a href="Classe_Equivalence.html#ajouteDemiLiaison">ajouteDemiLiaison</a></li><li data-type='method'><a href="Classe_Equivalence.html#ajouteImage">ajouteImage</a></li><li data-type='method'><a href="Classe_Equivalence.html#ajoutePoint">ajoutePoint</a></li><li data-type='method'><a href="Classe_Equivalence.html#bloque">bloque</a></li><li data-type='method'><a href="Classe_Equivalence.html#changePosition">changePosition</a></li><li data-type='method'><a href="Classe_Equivalence.html#COORD">COORD</a></li><li data-type='method'><a href="Classe_Equivalence.html#couleur">couleur</a></li><li data-type='method'><a href="Classe_Equivalence.html#defloute">defloute</a></li><li data-type='method'><a href="Classe_Equivalence.html#deselectionne">deselectionne</a></li><li data-type='method'><a href="Classe_Equivalence.html#dessineLigne">dessineLigne</a></li><li data-type='method'><a href="Classe_Equivalence.html#echelle">echelle</a></li><li data-type='method'><a href="Classe_Equivalence.html#floute">floute</a></li><li data-type='method'><a href="Classe_Equivalence.html#getLocalPosition">getLocalPosition</a></li><li data-type='method'><a href="Classe_Equivalence.html#getSourisLocal">getSourisLocal</a></li><li data-type='method'><a href="Classe_Equivalence.html#getTorseurCinematique">getTorseurCinematique</a></li><li data-type='method'><a href="Classe_Equivalence.html#getVRotation">getVRotation</a></li><li data-type='method'><a href="Classe_Equivalence.html#historique">historique</a></li><li data-type='method'><a href="Classe_Equivalence.html#lastPosition">lastPosition</a></li><li data-type='method'><a href="Classe_Equivalence.html#longueurHistorique">longueurHistorique</a></li><li data-type='method'><a href="Classe_Equivalence.html#MAJ">MAJ</a></li><li data-type='method'><a href="Classe_Equivalence.html#nom">nom</a></li><li data-type='method'><a href="Classe_Equivalence.html#numero">numero</a></li><li data-type='method'><a href="Classe_Equivalence.html#pushHistorique">pushHistorique</a></li><li data-type='method'><a href="Classe_Equivalence.html#recentreOrigine">recentreOrigine</a></li><li data-type='method'><a href="Classe_Equivalence.html#remplitSysteme">remplitSysteme</a></li><li data-type='method'><a href="Classe_Equivalence.html#restoreLastPosition">restoreLastPosition</a></li><li data-type='method'><a href="Classe_Equivalence.html#sauveLastPosition">sauveLastPosition</a></li><li data-type='method'><a href="Classe_Equivalence.html#selectionne">selectionne</a></li><li data-type='method'><a href="Classe_Equivalence.html#selectionneDeselectionne">selectionneDeselectionne</a></li><li data-type='method'><a href="Classe_Equivalence.html#supprimeDemiLiaison">supprimeDemiLiaison</a></li><li data-type='method'><a href="Classe_Equivalence.html#THETA">THETA</a></li><li data-type='method'><a href="Classe_Equivalence.html#type">type</a></li><li data-type='method'><a href="Classe_Equivalence.html#updateBounds">updateBounds</a></li><li data-type='method'><a href="Classe_Equivalence.html#X">X</a></li><li data-type='method'><a href="Classe_Equivalence.html#Y">Y</a></li></ul></li><li><a href="DemiLiaison.html">DemiLiaison</a><ul class='methods'><li data-type='method'><a href="DemiLiaison.html#autoSupprime">autoSupprime</a></li><li data-type='method'><a href="DemiLiaison.html#classe">classe</a></li><li data-type='method'><a href="DemiLiaison.html#consigneAngulaire">consigneAngulaire</a></li><li data-type='method'><a href="DemiLiaison.html#couleur">couleur</a></li><li data-type='method'><a href="DemiLiaison.html#demiSoeur">demiSoeur</a></li><li data-type='method'><a href="DemiLiaison.html#epaisseur">epaisseur</a></li><li data-type='method'><a href="DemiLiaison.html#genre">genre</a></li><li data-type='method'><a href="DemiLiaison.html#getAbsoluteRotation">getAbsoluteRotation</a></li><li data-type='method'><a href="DemiLiaison.html#k">k</a></li><li data-type='method'><a href="DemiLiaison.html#kRot">kRot</a></li><li data-type='method'><a href="DemiLiaison.html#L1L2">L1L2</a></li><li data-type='method'><a href="DemiLiaison.html#nbDDL">nbDDL</a></li><li data-type='method'><a href="DemiLiaison.html#O1L1">O1L1</a></li><li data-type='method'><a href="DemiLiaison.html#pilotee">pilotee</a></li><li data-type='method'><a href="DemiLiaison.html#remplisSysteme_liaison">remplisSysteme_liaison</a></li><li data-type='method'><a href="DemiLiaison.html#updateCouleurGraphismes">updateCouleurGraphismes</a></li><li data-type='method'><a href="DemiLiaison.html#updateEpaisseurGraphismes">updateEpaisseurGraphismes</a></li></ul></li><li><a href="Ligne.html">Ligne</a><ul class='methods'><li data-type='method'><a href="Ligne.html#couleur">couleur</a></li></ul></li><li><a href="PivotFemelle.html">PivotFemelle</a><ul class='methods'><li data-type='method'><a href="PivotFemelle.html#autoSupprime">autoSupprime</a></li><li data-type='method'><a href="PivotFemelle.html#classe">classe</a></li><li data-type='method'><a href="PivotFemelle.html#consigneAngulaire">consigneAngulaire</a></li><li data-type='method'><a href="PivotFemelle.html#couleur">couleur</a></li><li data-type='method'><a href="PivotFemelle.html#demiSoeur">demiSoeur</a></li><li data-type='method'><a href="PivotFemelle.html#epaisseur">epaisseur</a></li><li data-type='method'><a href="PivotFemelle.html#genre">genre</a></li><li data-type='method'><a href="PivotFemelle.html#getAbsoluteRotation">getAbsoluteRotation</a></li><li data-type='method'><a href="PivotFemelle.html#k">k</a></li><li data-type='method'><a href="PivotFemelle.html#kRot">kRot</a></li><li data-type='method'><a href="PivotFemelle.html#L1L2">L1L2</a></li><li data-type='method'><a href="PivotFemelle.html#longueurTige">longueurTige</a></li><li data-type='method'><a href="PivotFemelle.html#nbDDL">nbDDL</a></li><li data-type='method'><a href="PivotFemelle.html#O1L1">O1L1</a></li><li data-type='method'><a href="PivotFemelle.html#pilotee">pilotee</a></li><li data-type='method'><a href="PivotFemelle.html#rayon">rayon</a></li><li data-type='method'><a href="PivotFemelle.html#updateCouleurGraphismes">updateCouleurGraphismes</a></li><li data-type='method'><a href="PivotFemelle.html#updateEpaisseurGraphismes">updateEpaisseurGraphismes</a></li></ul></li><li><a href="PivotMale.html">PivotMale</a><ul class='methods'><li data-type='method'><a href="PivotMale.html#autoSupprime">autoSupprime</a></li><li data-type='method'><a href="PivotMale.html#classe">classe</a></li><li data-type='method'><a href="PivotMale.html#consigneAngulaire">consigneAngulaire</a></li><li data-type='method'><a href="PivotMale.html#couleur">couleur</a></li><li data-type='method'><a href="PivotMale.html#demiSoeur">demiSoeur</a></li><li data-type='method'><a href="PivotMale.html#epaisseur">epaisseur</a></li><li data-type='method'><a href="PivotMale.html#genre">genre</a></li><li data-type='method'><a href="PivotMale.html#getAbsoluteRotation">getAbsoluteRotation</a></li><li data-type='method'><a href="PivotMale.html#k">k</a></li><li data-type='method'><a href="PivotMale.html#kRot">kRot</a></li><li data-type='method'><a href="PivotMale.html#L1L2">L1L2</a></li><li data-type='method'><a href="PivotMale.html#longueurTige">longueurTige</a></li><li data-type='method'><a href="PivotMale.html#nbDDL">nbDDL</a></li><li data-type='method'><a href="PivotMale.html#O1L1">O1L1</a></li><li data-type='method'><a href="PivotMale.html#pilotee">pilotee</a></li><li data-type='method'><a href="PivotMale.html#rayon">rayon</a></li><li data-type='method'><a href="PivotMale.html#updateCouleurGraphismes">updateCouleurGraphismes</a></li><li data-type='method'><a href="PivotMale.html#updateEpaisseurGraphismes">updateEpaisseurGraphismes</a></li></ul></li><li><a href="Point.html">Point</a><ul class='methods'><li data-type='method'><a href="Point.html#changePosition">changePosition</a></li><li data-type='method'><a href="Point.html#couleur">couleur</a></li><li data-type='method'><a href="Point.html#diametre">diametre</a></li><li data-type='method'><a href="Point.html#epaisseur">epaisseur</a></li><li data-type='method'><a href="Point.html#MAJ">MAJ</a></li><li data-type='method'><a href="Point.html#nom">nom</a></li></ul></li><li><a href="Schema.html">Schema</a><ul class='methods'><li data-type='method'><a href="Schema.html#ajouteClasse">ajouteClasse</a></li><li data-type='method'><a href="Schema.html#choisitCouleur">choisitCouleur</a></li><li data-type='method'><a href="Schema.html#echelle">echelle</a></li><li data-type='method'><a href="Schema.html#faitBougerLaSimulation">faitBougerLaSimulation</a></li><li data-type='method'><a href="Schema.html#MAJ">MAJ</a></li><li data-type='method'><a href="Schema.html#nbClasses">nbClasses</a></li><li data-type='method'><a href="Schema.html#pushHistoriques">pushHistoriques</a></li><li data-type='method'><a href="Schema.html#reset">reset</a></li><li data-type='method'><a href="Schema.html#restorePositions">restorePositions</a></li><li data-type='method'><a href="Schema.html#sauvePositions">sauvePositions</a></li><li data-type='method'><a href="Schema.html#souris">souris</a></li><li data-type='method'><a href="Schema.html#SOURIS">SOURIS</a></li><li data-type='method'><a href="Schema.html#tSimulation">tSimulation</a></li><li data-type='method'><a href="Schema.html#unite">unite</a></li><li data-type='method'><a href="Schema.html#updateSourisFromStagePosition">updateSourisFromStagePosition</a></li><li data-type='method'><a href="Schema.html#x2X">x2X</a></li><li data-type='method'><a href="Schema.html#X2x">X2x</a></li><li data-type='method'><a href="Schema.html#xSouris">xSouris</a></li><li data-type='method'><a href="Schema.html#XSOURIS">XSOURIS</a></li><li data-type='method'><a href="Schema.html#y2Y">y2Y</a></li><li data-type='method'><a href="Schema.html#Y2y">Y2y</a></li><li data-type='method'><a href="Schema.html#ySouris">ySouris</a></li><li data-type='method'><a href="Schema.html#YSOURIS">YSOURIS</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#affiche_tous_schemas">affiche_tous_schemas</a></li><li><a href="global.html#affiche_toutes_images">affiche_toutes_images</a></li><li><a href="global.html#ajouteLiaison">ajouteLiaison</a></li><li><a href="global.html#cache_tous_schemas">cache_tous_schemas</a></li><li><a href="global.html#cache_toutes_images">cache_toutes_images</a></li><li><a href="global.html#console2HTML">console2HTML</a></li><li><a href="global.html#convertPosition">convertPosition</a></li><li><a href="global.html#deriveGauche3pts">deriveGauche3pts</a></li><li><a href="global.html#ecraseOptions">ecraseOptions</a></li><li><a href="global.html#execute_console">execute_console</a></li><li><a href="global.html#ferme_menus">ferme_menus</a></li><li><a href="global.html#getClasse">getClasse</a></li><li><a href="global.html#getGlobalRotation">getGlobalRotation</a></li><li><a href="global.html#getLocalToLocalRotation">getLocalToLocalRotation</a></li><li><a href="global.html#resetActions">resetActions</a></li><li><a href="global.html#SCHEMA">SCHEMA</a></li><li><a href="global.html#trouveClasse">trouveClasse</a></li><li><a href="global.html#update_liste_CE">update_liste_CE</a></li><li><a href="global.html#update_liste_CE1">update_liste_CE1</a></li><li><a href="global.html#update_liste_CE2">update_liste_CE2</a></li><li><a href="global.html#updateConsoleMiseEnForme">updateConsoleMiseEnForme</a></li><li><a href="global.html#videSuiveur">videSuiveur</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">classes/CLASS-Schema.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/* Class: Schema
 Schéma. Il représente la scène principale dans laquelle sont mis les dessins.
 Hérite de &lt;createjs.Container>
*/
/*
var Schema2 = function()
{
	//==========================
	//Constructeur issu de l'heritage
	//==========================

		createjs.Container.call(this);


	//==========================
	//Variables Membres
	//==========================
	
		this._echelle=40;	//Nombre de pixel par unité
		this.classes=[];	//Liste des classes d'équivalence
		this._souris={x:0,y:0};
//		this._t0=0;	//Temps initiale du début de la simulation
		this._tSimulation = 0;	//Temps écoulé depuis le début de la simulation (pauses incluses)

	//==========================
	//getter/setter
	//==========================

		// -----------------------------------------------------

		this.echelle=function(e)
		{
			if(typeof(e)!='undefined')
				this._echelle=e;
			return this._echelle;
		}
		
		//Fonction qui renvoie les coordonnées (en pixel) sur x d'un point du schéma
		this.x2X=function(x)
		{
			return x*this._echelle;
		}
		
		//Fonction qui renvoie les coordonnées (en pixel) sur y d'un point du schéma
		this.y2Y=function(y)
		{
			return -y*this._echelle;
		}
		
		//Fonction qui renvoie les coordonnées (dans la base de schema) sur x 
		this.X2x=function(X)
		{
			return X/this._echelle;
		}
		
		//Fonction qui renvoie les coordonnées (dans la base de schema) sur y 
		this.Y2y=function(Y)
		{
			return -Y/this._echelle;
		}
		
		
		//Fonction qui renvoie les coordonnées (dans la base de schema) sur y 
		this.nbClasses=function()
		{
			return this.classes.length;
		}
		
		//Souris **************************************
		
		//Coordonnées de la souris (local)
		this.souris=function(s)
		{
			if(typeof(s)!='undefined')
				this._souris=s;
			return this._souris;
		}
		this.xSouris=function(x)
		{
			if(typeof(x)!='undefined')
				this._souris.x=x;
			return this._souris.x;
		}
		this.ySouris=function(y)
		{
			if(typeof(y)!='undefined')
				this._souris.y=y;
			return this._souris.y;
		}
		//Coordonnées de la souris (en px)
		this.SOURIS=function(s)
		{
			if(typeof(s)!='undefined')
				this._souris={x:s.X/this._echelle,y:-s.Y/this._echelle};
			return {X:this._souris.x*this._echelle,Y:-this._souris.y*this._echelle};
		}
		this.XSOURIS=function(X)
		{
			if(typeof(X)!='undefined')
				this._souris.x=X/this._echelle;
			return this._souris.x*this._echelle;
		}
		this.YSOURIS=function(Y)
		{
			if(typeof(Y)!='undefined')
				this._souris.y=-Y/this._echelle;
			return -this._souris.y*this._echelle;
		}


		//Fonction qui renvoie la date initiale de la simulation depuis t0
		//this.t0 = function(t0)
	//	{
	//		if(typeof(t0)!='undefined')
	//			this._t0=t0;
	//		return this._t0;
	//	}


		//Fonction qui renvoie le temps de la simulation depuis le début de la simu
		this.tSimulation = function(t)
		{
			if(typeof(t)!='undefined')
				this._tSimulation=t;
			return this._tSimulation
		}

	//==========================
	//Autres fonctions membres
	//==========================

		//Ajoute un classe au dessin
		this.ajouteClasse=function(c)
		{
		//	i=0
		//	while(this.classes[i] != undefined) //On cherche un numéro de classe non-utilisé
		//		i+=1;
			this.classes.push(c);
			//c.numero(i);
			var num = this.classes.length-1 ; //N° de la classe
			c.couleur(this.choisitCouleur(num));
			this.addChild(c);	//Ajoute graphiquement
		}
		
		this.choisitCouleur=function(i)
		{
			if(typeof(i) == 'undefined')
				i = this.classes.length; // On prend la 1ère couleur libre par defaut
			//liste_Couleurs=["black","red","blue","Green","Orange","Purple","SaddleBrown","Navy","Maroon","DeepSkyBlue","LimeGreen","DarkGoldenRod","Orchid"];
			liste_Couleurs=["#000000","#FF0000","#0000FF","#00AA00","#FF9900","#FF00FF","#990000","#000099","#00FFFF","#99FF00"];
			return liste_Couleurs[i%(liste_Couleurs.length)]
		}

		//Fonction qui demande à chaque CE de sauvegarder leur position.
		this.sauvePositions = function()
		{
			for(var i=0;i&lt;this.classes.length;i++)
			{
				c= this.classes[i]
				c.sauveLastPosition();
			}
		}

		//Fonction qui demande à chaque CE de recharger leur dernière position sauvegardée.
		this.restorePositions = function()
		{
			for(var i=0;i&lt;this.classes.length;i++)
			{
				c= this.classes[i]
				c.restoreLastPosition();
			}
		}
		
		//Fonction qui enregistre dans l'historique les positions des CL
		//Il prend la date t en argument
		this.pushHistoriques=function(t)
		{
			for(var i=0;i&lt;this.classes.length;i++)
			{
				c = this.classes[i]
				c.pushHistorique(t,c.x,c.y,c.rotation);
			}
		}
		
		//Efface tout le dessin
		this.reset=function()
		{
			this.classes=[];
			for(var i=0;i&lt;this.classes.length;i++)
			{
				c = this.classes[i]
				this.removeChild(c);
			}
		}
		
	//==========================
	//Graphismes
	//==========================
	
		//Repere (placé après avoir construit l'objet)

	//==========================
	//EVENEMENS
	//==========================
	
		ceci=this;
		this.updateSourisFromStagePosition=function(event)
		{
			var X=event.stageX;
			var Y=event.stageY;
			var posLoc=ceci.globalToLocal(X,Y);
			ceci.SOURIS({X:posLoc.x,Y:posLoc.y})
		}


		cela = this;
		this.addEventListener("tick",function(event){
		
				if(ACTION=="simule" || ACTION == "MANIP" &amp;&amp; SOUS_ACTION == "TIRE")
				{
					if(event.delta=="undefined")
						ACTION=""
					schema._tSimulation += event.delta/1000.	//On fait s'écouler le temps
					//console.log(schema._tSimulation);
					for(var i=0;i&lt;PRECISION;i++)
						resout();
					schema.pushHistoriques(schema._tSimulation)
				}
			}); 

		
		

		

}
Schema2.prototype = Object.create(createjs.Container.prototype);//On recopie le prototype de createjs.Stage
Schema2.prototype.constructor = Schema2;//On recopie le constructeur de Noeud dans son prototype
*/


/**
 * Classe représentant le calque principal sur lequel on dessine.
 * @extends createjs.Container
 */
class Schema extends createjs.Container
{
	// **********************************************************
	/*
	 * Constructeur
	 */
	constructor()
	{
		super()	// Rappelle le constructeur parent
		
		// DESSINS
		
		// EVENEMENTS
			// Ajout d'évenement lorsqu'une simulation se déroule
			this.addEventListener("tick",this.faitBougerLaSimulation); 
	}
	
	
	
	
	//==========================
	//Variables Membres
	//==========================
	
			/** Nombre de pixels qui définit l'unité de longueur (lorsqu'on a un zoom de 100%)
			@type {Array}  */
		_unite = 40 ;

		
			/** Liste des classes d'équivalence présentes sur le dessin
			@type {Array}  */
		classes = [] ;
		
			/** Coordonnées de la souris
			@type {coordonnees} */
		_souris={x:0,y:0};
		
		
//		this._t0=0;	//Temps initiale du début de la simulation


			/** Temps écoulé depuis le début de la simulation (pauses incluses). Unité = ???? milliseconde ????
			@type {Number}  */
		_tSimulation = 0;	//
		
			/** Liste des points présents dans la classe d'équivalence
			@type {Array} */
		_listePoints = [];
		
	//==========================
	//getter/setter
	//==========================
	
		
		
			/** GETTER / SETTER de l'échelle (c'est à dire : le nombre de pixels qui définit l'unité de longueur)
			@param {Number} e - [OPTIONNEL] Nouvelle valeur de l'échelle.
			@deprecated remplacé par [unite()]{@link Schema#unite}.
			@return {Number} L'échelle courante
			*/
		echelle(e)
		{
			if(typeof(e)!='undefined')
				this._unite=e;
			return this._unite;
		}
		
		
			/** GETTER / SETTER de l'unité (c'est à dire : le nombre de pixels qui définit l'unité de longueur)
			@param {Number} u - [OPTIONNEL] Nouvelle valeur de l'échelle.
			@return {Number} L'échelle courante
			*/
		unite(u)
		{
			if(typeof(u)!='undefined')
				this._unite=u;
			return this._unite;
		}
		
			
			/** Fonction qui renvoie les coordonnées (en pixel) sur x d'un point du schéma (en prenant en compte l'échelle)
			@param {Number} x - Coordonnées sur x (dans l'unité du dessin).
			@return {Number} Coordonnées sur x convertie en pixels
			*/
		x2X(x)
		{
			return x*this._unite;
		}
			
			/** Fonction qui renvoie les coordonnées (en pixel) sur y d'un point du schéma (en prenant en compte l'échelle et le sens)
			@param {Number} y - Coordonnées sur y (dans l'unité du dessin).
			@return {Number} Coordonnées sur y convertie en pixels
			*/
		y2Y(y)
		{
			return -y*this._unite;
		}
			
			/** Fonction qui renvoie les coordonnées (en unité du schéma) sur X d'un point (en prenant en compte l'échelle)
			@param {Number} X - Coordonnées sur x (en pixel).
			@return {Number} Coordonnées sur x convertie en unité du schéma
			*/
		X2x(X)
		{
			return X/this._unite;
		}
		
			/** Fonction qui renvoie les coordonnées (en unité du schéma) sur Y d'un point (en prenant en compte l'échelle)
			@param {Number} Y - Coordonnées sur y (en pixel).
			@return {Number} Coordonnées sur y convertie en unité du schéma (et dans le bon sens)
			*/
		Y2y(Y)
		{
			return -Y/this._unite;
		}
		
			
			/** Fonction qui renvoie le nombre de classes d'équivalence présentes sur le dessin
			@return {Number} Nombre de classe présentes sur le dessin
			*/
		nbClasses()
		{
			return this.classes.length;
		}
		
		
	//Souris **************************************
		

			/**  GETTER / SETTER Coordonnées (en pixel) de la souris.
			@param {Point} s (FACULTATIF) Coordonnées de la souris (en pixel)
			@return {Point}  Coordonnées de la souris
			*/
		souris(s)
		{
			if(typeof(s)!='undefined')
				this._souris=s;
			return this._souris;
		}
		
			/** GETTER / SETTER Coordonnée sur x (en pixel) de la souris.
			@param {Number} x - (FACULTATIF) Coordonnée sur x de la souris (en pixel)
			@return {Number} Coordonnée sur x de la souris (en pixel)
			*/
		xSouris(x)
		{
			if(typeof(x)!='undefined')
				this._souris.x=x;
			return this._souris.x;
		}
		
			/** GETTER / SETTER Coordonnée sur y (en pixel) de la souris.
			@param {Number} y - (FACULTATIF) Coordonnée sur y de la souris (en pixel)
			@return {Number} Coordonnée sur y de la souris (en pixel)
			*/
		ySouris(y)
		{
			if(typeof(y)!='undefined')
				this._souris.y=y;
			return this._souris.y;
		}
		
			/**  GETTER / SETTER Coordonnées (en coordonnées locales) de la souris.
			@param {Point} S - (FACULTATIF) Coordonnées (en coordonnées locales) de la souris.
			@return {Point} Coordonnées (en coordonnées locales) de la souris.
			*/
		SOURIS(S)
		{
			if(typeof(S)!='undefined')
				this._souris={x:S.X/this._unite,y:-S.Y/this._unite};
			return {X:this._souris.x*this._unite,Y:-this._souris.y*this._unite};
		}
		
			/** GETTER / SETTER Coordonnée sur X (en coordonnées locales) de la souris.
			@param {Number} X - (FACULTATIF) Coordonnée sur X de la souris (en coordonnées locales)
			@return {Number} Coordonnée sur X de la souris (en coordonnées locales)
			*/
		XSOURIS(X)
		{
			if(typeof(X)!='undefined')
				this._souris.x=X/this._unite;
			return this._souris.x*this._unite;
		}
		
			/** GETTER / SETTER Coordonnée sur Y (en coordonnées locales) de la souris.
			@param {Number} Y - (FACULTATIF) Coordonnée sur Y de la souris (en coordonnées locales)
			@return {Number} Coordonnée sur Y de la souris (en coordonnées locales)
			*/
		YSOURIS(Y)
		{
			if(typeof(Y)!='undefined')
				this._souris.y=-Y/this._unite;
			return -this._souris.y*this._unite;
		}


		//Fonction qui renvoie la date initiale de la simulation depuis t0
		/*this.t0 = function(t0)
		{
			if(typeof(t0)!='undefined')
				this._t0=t0;
			return this._t0;
		}*/

		
			/** GETTER / SETTER du temps de la simulation depuis le début de la simu
			@param {Number} t - (FACULTATIF) Valeur de temps à stocker
			@return {Number} Temps de simulation (en ms ???)
			*/
		tSimulation(t)
		{
			if(typeof(t)!='undefined')
				this._tSimulation=t;
			return this._tSimulation
		}
		
	//==========================
	//Autres fonctions membres
	//==========================

			/** Fonction qui ajoute une nouvelle classe au schéma. Elle utilse "addChild" de createjs, mais aussi l'ajoute à la liste membre "classes".
			@param {Classe_Equivalence} c - Classe d'équivalence à ajouter.
			*/
		ajouteClasse(c)
		{
			this.classes.push(c);
			var num = this.classes.length-1 ; //N° de la classe
			c.couleur(this.choisitCouleur(num));
			this.addChild(c);	//Ajoute graphiquement
		}
		
			/** Fonction qui choisit la couleur de la classe d'équivalence n°i parmis une palette de couleur.
			@param {number} i - Numéro de la classe d'équivalence dont on veut choisir une couleur (0 inclus)
			@return {string} Couleur
			*/
		choisitCouleur(i)
		{
			if(typeof(i) == 'undefined')
				i = this.classes.length; // On prend la 1ère couleur libre par defaut
			//liste_Couleurs=["black","red","blue","Green","Orange","Purple","SaddleBrown","Navy","Maroon","DeepSkyBlue","LimeGreen","DarkGoldenRod","Orchid"];
			var liste_Couleurs=["#000000","#FF0000","#0000FF","#00AA00","#FF9900","#FF00FF","#990000","#000099","#00FFFF","#99FF00"];
			return liste_Couleurs[i%(liste_Couleurs.length)]
		}
		
			/** Fonction qui demande à chaque classe d'équivalence de sauvegarder leur position.
			*/
		sauvePositions()
		{
			for(var i=0;i&lt;this.classes.length;i++)
			{
				var c= this.classes[i]
				c.sauveLastPosition();
			}
		}

			/** Fonction qui demande à chaque classe d'équivalence de recharger (=de se repositionner sur) leur dernière position sauvegardée.
			*/
		restorePositions()
		{
			for(var i=0;i&lt;this.classes.length;i++)
			{
				var c= this.classes[i]
				c.restoreLastPosition();
			}
		}
		
			/** Fonction qui enregistre dans l'historique les positions des classe d'équivalence
			@param {number} t - date de l'enregistrement (en ms ?)
			*/
		pushHistoriques(t)
		{
			for(var i=0;i&lt;this.classes.length;i++)
			{
				var c = this.classes[i]
				c.pushHistorique(t,c.x,c.y,c.rotation);
			}
		}
		
			/** Efface le dessin et vide la liste des classes d'équivalence.
			*/
		reset()
		{
			for(var i=0;i&lt;this.classes.length;i++)
			{
				var c = this.classes[i]
				this.removeChild(c);
			}
			this.classes=[];
		}
		
			/** Fonction qui met à jour les enfants */
		MAJ()
		{
			this.classes.forEach(function(C){
				C.MAJ();
			});
		}
		
	//==========================
	//Graphismes
	//==========================
	
		//Repere (placé après avoir construit l'objet)
		

	//==========================
	//EVENEMENS
	//==========================
	
			/** Fonction appelée lors d'un événement de souris, qui enregistre la postiion de la souris.
			@param {event} event - Événement de souris (clic, etc.)
			*/
		updateSourisFromStagePosition(event)
		{
			var X=event.stageX;
			var Y=event.stageY;
			var posLoc=this.globalToLocal(X,Y);
			this.SOURIS({X:posLoc.x,Y:posLoc.y})
		}


			/** Fonction qui fait calculer la simulation pour un pas de temps, si 'on est en mode "simule" ou en mode "tire"
			@param {event} event - Événement (issu d'une tick normalement)
			*/
		faitBougerLaSimulation(event)
		{
			if(ACTION=="simule" || ACTION == "MANIP" &amp;&amp; SOUS_ACTION == "TIRE")
			{
				if(event.delta=="undefined")
					ACTION=""
				schema._tSimulation += event.delta/1000.	//On fait s'écouler le temps
				//console.log(schema._tSimulation);
				for(var i=0;i&lt;PRECISION;i++)
					resout();
				schema.pushHistoriques(schema._tSimulation)
				SCHEMA.MAJ(); // Met à jours les enfants
			}
		}

}

</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.7</a> on Sun Jul 31 2022 23:54:06 GMT+0200 (heure d’été d’Europe centrale) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
