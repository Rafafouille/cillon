<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>classes/liaisons/CLASS-PivotMale.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Accroche.html">Accroche</a><ul class='methods'><li data-type='method'><a href="Accroche.html#autoSupprime">autoSupprime</a></li><li data-type='method'><a href="Accroche.html#classe">classe</a></li><li data-type='method'><a href="Accroche.html#consignesCinematiques">consignesCinematiques</a></li><li data-type='method'><a href="Accroche.html#couleur">couleur</a></li><li data-type='method'><a href="Accroche.html#demiSoeur">demiSoeur</a></li><li data-type='method'><a href="Accroche.html#epaisseur">epaisseur</a></li><li data-type='method'><a href="Accroche.html#evalueConsigne">evalueConsigne</a></li><li data-type='method'><a href="Accroche.html#genre">genre</a></li><li data-type='method'><a href="Accroche.html#getAbsoluteRotation">getAbsoluteRotation</a></li><li data-type='method'><a href="Accroche.html#getScore">getScore</a></li><li data-type='method'><a href="Accroche.html#k">k</a></li><li data-type='method'><a href="Accroche.html#kRot">kRot</a></li><li data-type='method'><a href="Accroche.html#L1L2">L1L2</a></li><li data-type='method'><a href="Accroche.html#L1S">L1S</a></li><li data-type='method'><a href="Accroche.html#longueurTige">longueurTige</a></li><li data-type='method'><a href="Accroche.html#nbDDL">nbDDL</a></li><li data-type='method'><a href="Accroche.html#O1L1">O1L1</a></li><li data-type='method'><a href="Accroche.html#pilotee">pilotee</a></li><li data-type='method'><a href="Accroche.html#rayon">rayon</a></li><li data-type='method'><a href="Accroche.html#remplisSysteme_liaison">remplisSysteme_liaison</a></li><li data-type='method'><a href="Accroche.html#updateCouleurGraphismes">updateCouleurGraphismes</a></li><li data-type='method'><a href="Accroche.html#updateEpaisseurGraphismes">updateEpaisseurGraphismes</a></li></ul></li><li><a href="Classe_Equivalence.html">Classe_Equivalence</a><ul class='methods'><li data-type='method'><a href="Classe_Equivalence.html#ajouteDemiLiaison">ajouteDemiLiaison</a></li><li data-type='method'><a href="Classe_Equivalence.html#ajouteImage">ajouteImage</a></li><li data-type='method'><a href="Classe_Equivalence.html#ajoutePoint">ajoutePoint</a></li><li data-type='method'><a href="Classe_Equivalence.html#bloque">bloque</a></li><li data-type='method'><a href="Classe_Equivalence.html#changePosition">changePosition</a></li><li data-type='method'><a href="Classe_Equivalence.html#COORD">COORD</a></li><li data-type='method'><a href="Classe_Equivalence.html#couleur">couleur</a></li><li data-type='method'><a href="Classe_Equivalence.html#defloute">defloute</a></li><li data-type='method'><a href="Classe_Equivalence.html#deselectionne">deselectionne</a></li><li data-type='method'><a href="Classe_Equivalence.html#dessineLigne">dessineLigne</a></li><li data-type='method'><a href="Classe_Equivalence.html#echelle">echelle</a></li><li data-type='method'><a href="Classe_Equivalence.html#floute">floute</a></li><li data-type='method'><a href="Classe_Equivalence.html#getLocalPosition">getLocalPosition</a></li><li data-type='method'><a href="Classe_Equivalence.html#getSourisLocal">getSourisLocal</a></li><li data-type='method'><a href="Classe_Equivalence.html#getTorseurCinematique">getTorseurCinematique</a></li><li data-type='method'><a href="Classe_Equivalence.html#getVRotation">getVRotation</a></li><li data-type='method'><a href="Classe_Equivalence.html#historique">historique</a></li><li data-type='method'><a href="Classe_Equivalence.html#lastPosition">lastPosition</a></li><li data-type='method'><a href="Classe_Equivalence.html#longueurHistorique">longueurHistorique</a></li><li data-type='method'><a href="Classe_Equivalence.html#MAJ">MAJ</a></li><li data-type='method'><a href="Classe_Equivalence.html#nom">nom</a></li><li data-type='method'><a href="Classe_Equivalence.html#numero">numero</a></li><li data-type='method'><a href="Classe_Equivalence.html#pushHistorique">pushHistorique</a></li><li data-type='method'><a href="Classe_Equivalence.html#recentreOrigine">recentreOrigine</a></li><li data-type='method'><a href="Classe_Equivalence.html#remplitSysteme">remplitSysteme</a></li><li data-type='method'><a href="Classe_Equivalence.html#restoreLastPosition">restoreLastPosition</a></li><li data-type='method'><a href="Classe_Equivalence.html#sauveLastPosition">sauveLastPosition</a></li><li data-type='method'><a href="Classe_Equivalence.html#selectionne">selectionne</a></li><li data-type='method'><a href="Classe_Equivalence.html#selectionneDeselectionne">selectionneDeselectionne</a></li><li data-type='method'><a href="Classe_Equivalence.html#supprimeDemiLiaison">supprimeDemiLiaison</a></li><li data-type='method'><a href="Classe_Equivalence.html#THETA">THETA</a></li><li data-type='method'><a href="Classe_Equivalence.html#type">type</a></li><li data-type='method'><a href="Classe_Equivalence.html#updateBounds">updateBounds</a></li><li data-type='method'><a href="Classe_Equivalence.html#X">X</a></li><li data-type='method'><a href="Classe_Equivalence.html#Y">Y</a></li></ul></li><li><a href="DemiLiaison.html">DemiLiaison</a><ul class='methods'><li data-type='method'><a href="DemiLiaison.html#autoSupprime">autoSupprime</a></li><li data-type='method'><a href="DemiLiaison.html#classe">classe</a></li><li data-type='method'><a href="DemiLiaison.html#consignesCinematiques">consignesCinematiques</a></li><li data-type='method'><a href="DemiLiaison.html#couleur">couleur</a></li><li data-type='method'><a href="DemiLiaison.html#demiSoeur">demiSoeur</a></li><li data-type='method'><a href="DemiLiaison.html#epaisseur">epaisseur</a></li><li data-type='method'><a href="DemiLiaison.html#evalueConsigne">evalueConsigne</a></li><li data-type='method'><a href="DemiLiaison.html#genre">genre</a></li><li data-type='method'><a href="DemiLiaison.html#getAbsoluteRotation">getAbsoluteRotation</a></li><li data-type='method'><a href="DemiLiaison.html#getScore">getScore</a></li><li data-type='method'><a href="DemiLiaison.html#k">k</a></li><li data-type='method'><a href="DemiLiaison.html#kRot">kRot</a></li><li data-type='method'><a href="DemiLiaison.html#L1L2">L1L2</a></li><li data-type='method'><a href="DemiLiaison.html#nbDDL">nbDDL</a></li><li data-type='method'><a href="DemiLiaison.html#O1L1">O1L1</a></li><li data-type='method'><a href="DemiLiaison.html#pilotee">pilotee</a></li><li data-type='method'><a href="DemiLiaison.html#remplisSysteme_liaison">remplisSysteme_liaison</a></li><li data-type='method'><a href="DemiLiaison.html#updateCouleurGraphismes">updateCouleurGraphismes</a></li><li data-type='method'><a href="DemiLiaison.html#updateEpaisseurGraphismes">updateEpaisseurGraphismes</a></li></ul></li><li><a href="GlissiereFemelle.html">GlissiereFemelle</a><ul class='methods'><li data-type='method'><a href="GlissiereFemelle.html#autoSupprime">autoSupprime</a></li><li data-type='method'><a href="GlissiereFemelle.html#classe">classe</a></li><li data-type='method'><a href="GlissiereFemelle.html#consignesCinematiques">consignesCinematiques</a></li><li data-type='method'><a href="GlissiereFemelle.html#couleur">couleur</a></li><li data-type='method'><a href="GlissiereFemelle.html#demiSoeur">demiSoeur</a></li><li data-type='method'><a href="GlissiereFemelle.html#epaisseur">epaisseur</a></li><li data-type='method'><a href="GlissiereFemelle.html#evalueConsigne">evalueConsigne</a></li><li data-type='method'><a href="GlissiereFemelle.html#genre">genre</a></li><li data-type='method'><a href="GlissiereFemelle.html#getAbsoluteRotation">getAbsoluteRotation</a></li><li data-type='method'><a href="GlissiereFemelle.html#getScore">getScore</a></li><li data-type='method'><a href="GlissiereFemelle.html#k">k</a></li><li data-type='method'><a href="GlissiereFemelle.html#kRot">kRot</a></li><li data-type='method'><a href="GlissiereFemelle.html#L1L2">L1L2</a></li><li data-type='method'><a href="GlissiereFemelle.html#largeur">largeur</a></li><li data-type='method'><a href="GlissiereFemelle.html#longueur">longueur</a></li><li data-type='method'><a href="GlissiereFemelle.html#longueurTige">longueurTige</a></li><li data-type='method'><a href="GlissiereFemelle.html#nbDDL">nbDDL</a></li><li data-type='method'><a href="GlissiereFemelle.html#O1L1">O1L1</a></li><li data-type='method'><a href="GlissiereFemelle.html#pilotee">pilotee</a></li><li data-type='method'><a href="GlissiereFemelle.html#remplisSysteme_liaison">remplisSysteme_liaison</a></li><li data-type='method'><a href="GlissiereFemelle.html#updateCouleurGraphismes">updateCouleurGraphismes</a></li><li data-type='method'><a href="GlissiereFemelle.html#updateEpaisseurGraphismes">updateEpaisseurGraphismes</a></li></ul></li><li><a href="GlissiereMale.html">GlissiereMale</a><ul class='methods'><li data-type='method'><a href="GlissiereMale.html#autoSupprime">autoSupprime</a></li><li data-type='method'><a href="GlissiereMale.html#classe">classe</a></li><li data-type='method'><a href="GlissiereMale.html#consignesCinematiques">consignesCinematiques</a></li><li data-type='method'><a href="GlissiereMale.html#couleur">couleur</a></li><li data-type='method'><a href="GlissiereMale.html#demiSoeur">demiSoeur</a></li><li data-type='method'><a href="GlissiereMale.html#epaisseur">epaisseur</a></li><li data-type='method'><a href="GlissiereMale.html#evalueConsigne">evalueConsigne</a></li><li data-type='method'><a href="GlissiereMale.html#genre">genre</a></li><li data-type='method'><a href="GlissiereMale.html#getAbsoluteRotation">getAbsoluteRotation</a></li><li data-type='method'><a href="GlissiereMale.html#getScore">getScore</a></li><li data-type='method'><a href="GlissiereMale.html#k">k</a></li><li data-type='method'><a href="GlissiereMale.html#kRot">kRot</a></li><li data-type='method'><a href="GlissiereMale.html#L1L2">L1L2</a></li><li data-type='method'><a href="GlissiereMale.html#longueur">longueur</a></li><li data-type='method'><a href="GlissiereMale.html#nbDDL">nbDDL</a></li><li data-type='method'><a href="GlissiereMale.html#O1L1">O1L1</a></li><li data-type='method'><a href="GlissiereMale.html#pilotee">pilotee</a></li><li data-type='method'><a href="GlissiereMale.html#remplisSysteme_liaison">remplisSysteme_liaison</a></li><li data-type='method'><a href="GlissiereMale.html#updateCouleurGraphismes">updateCouleurGraphismes</a></li><li data-type='method'><a href="GlissiereMale.html#updateEpaisseurGraphismes">updateEpaisseurGraphismes</a></li></ul></li><li><a href="Ligne.html">Ligne</a><ul class='methods'><li data-type='method'><a href="Ligne.html#couleur">couleur</a></li></ul></li><li><a href="PivotFemelle.html">PivotFemelle</a><ul class='methods'><li data-type='method'><a href="PivotFemelle.html#autoSupprime">autoSupprime</a></li><li data-type='method'><a href="PivotFemelle.html#classe">classe</a></li><li data-type='method'><a href="PivotFemelle.html#consignesCinematiques">consignesCinematiques</a></li><li data-type='method'><a href="PivotFemelle.html#couleur">couleur</a></li><li data-type='method'><a href="PivotFemelle.html#demiSoeur">demiSoeur</a></li><li data-type='method'><a href="PivotFemelle.html#epaisseur">epaisseur</a></li><li data-type='method'><a href="PivotFemelle.html#evalueConsigne">evalueConsigne</a></li><li data-type='method'><a href="PivotFemelle.html#genre">genre</a></li><li data-type='method'><a href="PivotFemelle.html#getAbsoluteRotation">getAbsoluteRotation</a></li><li data-type='method'><a href="PivotFemelle.html#getScore">getScore</a></li><li data-type='method'><a href="PivotFemelle.html#k">k</a></li><li data-type='method'><a href="PivotFemelle.html#kRot">kRot</a></li><li data-type='method'><a href="PivotFemelle.html#L1L2">L1L2</a></li><li data-type='method'><a href="PivotFemelle.html#longueurTige">longueurTige</a></li><li data-type='method'><a href="PivotFemelle.html#nbDDL">nbDDL</a></li><li data-type='method'><a href="PivotFemelle.html#O1L1">O1L1</a></li><li data-type='method'><a href="PivotFemelle.html#pilotee">pilotee</a></li><li data-type='method'><a href="PivotFemelle.html#rayon">rayon</a></li><li data-type='method'><a href="PivotFemelle.html#remplisSysteme_liaison">remplisSysteme_liaison</a></li><li data-type='method'><a href="PivotFemelle.html#updateCouleurGraphismes">updateCouleurGraphismes</a></li><li data-type='method'><a href="PivotFemelle.html#updateEpaisseurGraphismes">updateEpaisseurGraphismes</a></li></ul></li><li><a href="PivotMale.html">PivotMale</a><ul class='methods'><li data-type='method'><a href="PivotMale.html#autoSupprime">autoSupprime</a></li><li data-type='method'><a href="PivotMale.html#classe">classe</a></li><li data-type='method'><a href="PivotMale.html#consignesCinematiques">consignesCinematiques</a></li><li data-type='method'><a href="PivotMale.html#couleur">couleur</a></li><li data-type='method'><a href="PivotMale.html#demiSoeur">demiSoeur</a></li><li data-type='method'><a href="PivotMale.html#epaisseur">epaisseur</a></li><li data-type='method'><a href="PivotMale.html#evalueConsigne">evalueConsigne</a></li><li data-type='method'><a href="PivotMale.html#genre">genre</a></li><li data-type='method'><a href="PivotMale.html#getAbsoluteRotation">getAbsoluteRotation</a></li><li data-type='method'><a href="PivotMale.html#getScore">getScore</a></li><li data-type='method'><a href="PivotMale.html#k">k</a></li><li data-type='method'><a href="PivotMale.html#kRot">kRot</a></li><li data-type='method'><a href="PivotMale.html#L1L2">L1L2</a></li><li data-type='method'><a href="PivotMale.html#longueurTige">longueurTige</a></li><li data-type='method'><a href="PivotMale.html#nbDDL">nbDDL</a></li><li data-type='method'><a href="PivotMale.html#O1L1">O1L1</a></li><li data-type='method'><a href="PivotMale.html#pilotee">pilotee</a></li><li data-type='method'><a href="PivotMale.html#rayon">rayon</a></li><li data-type='method'><a href="PivotMale.html#remplisSysteme_liaison">remplisSysteme_liaison</a></li><li data-type='method'><a href="PivotMale.html#updateCouleurGraphismes">updateCouleurGraphismes</a></li><li data-type='method'><a href="PivotMale.html#updateEpaisseurGraphismes">updateEpaisseurGraphismes</a></li></ul></li><li><a href="Point.html">Point</a><ul class='methods'><li data-type='method'><a href="Point.html#changePosition">changePosition</a></li><li data-type='method'><a href="Point.html#couleur">couleur</a></li><li data-type='method'><a href="Point.html#diametre">diametre</a></li><li data-type='method'><a href="Point.html#epaisseur">epaisseur</a></li><li data-type='method'><a href="Point.html#MAJ">MAJ</a></li><li data-type='method'><a href="Point.html#nom">nom</a></li></ul></li><li><a href="Schema.html">Schema</a><ul class='methods'><li data-type='method'><a href="Schema.html#ajouteClasse">ajouteClasse</a></li><li data-type='method'><a href="Schema.html#choisitCouleur">choisitCouleur</a></li><li data-type='method'><a href="Schema.html#echelle">echelle</a></li><li data-type='method'><a href="Schema.html#faitBougerLaSimulation">faitBougerLaSimulation</a></li><li data-type='method'><a href="Schema.html#MAJ">MAJ</a></li><li data-type='method'><a href="Schema.html#nbClasses">nbClasses</a></li><li data-type='method'><a href="Schema.html#pushHistoriques">pushHistoriques</a></li><li data-type='method'><a href="Schema.html#reset">reset</a></li><li data-type='method'><a href="Schema.html#restorePositions">restorePositions</a></li><li data-type='method'><a href="Schema.html#sauvePositions">sauvePositions</a></li><li data-type='method'><a href="Schema.html#souris">souris</a></li><li data-type='method'><a href="Schema.html#SOURIS">SOURIS</a></li><li data-type='method'><a href="Schema.html#tSimulation">tSimulation</a></li><li data-type='method'><a href="Schema.html#unite">unite</a></li><li data-type='method'><a href="Schema.html#updateSourisFromStagePosition">updateSourisFromStagePosition</a></li><li data-type='method'><a href="Schema.html#x2X">x2X</a></li><li data-type='method'><a href="Schema.html#X2x">X2x</a></li><li data-type='method'><a href="Schema.html#xSouris">xSouris</a></li><li data-type='method'><a href="Schema.html#XSOURIS">XSOURIS</a></li><li data-type='method'><a href="Schema.html#y2Y">y2Y</a></li><li data-type='method'><a href="Schema.html#Y2y">Y2y</a></li><li data-type='method'><a href="Schema.html#ySouris">ySouris</a></li><li data-type='method'><a href="Schema.html#YSOURIS">YSOURIS</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#affiche_tous_schemas">affiche_tous_schemas</a></li><li><a href="global.html#affiche_toutes_images">affiche_toutes_images</a></li><li><a href="global.html#ajouteLiaison">ajouteLiaison</a></li><li><a href="global.html#cache_tous_schemas">cache_tous_schemas</a></li><li><a href="global.html#cache_toutes_images">cache_toutes_images</a></li><li><a href="global.html#console2HTML">console2HTML</a></li><li><a href="global.html#convertPosition">convertPosition</a></li><li><a href="global.html#creneau">creneau</a></li><li><a href="global.html#deriveGauche3pts">deriveGauche3pts</a></li><li><a href="global.html#ecraseOptions">ecraseOptions</a></li><li><a href="global.html#execute_console">execute_console</a></li><li><a href="global.html#ferme_menus">ferme_menus</a></li><li><a href="global.html#getClasse">getClasse</a></li><li><a href="global.html#getGlobalRotation">getGlobalRotation</a></li><li><a href="global.html#getLocalToLocalRotation">getLocalToLocalRotation</a></li><li><a href="global.html#getScore">getScore</a></li><li><a href="global.html#ITER_MAX">ITER_MAX</a></li><li><a href="global.html#LISTE_LIAISONS">LISTE_LIAISONS</a></li><li><a href="global.html#PRECISION">PRECISION</a></li><li><a href="global.html#resetActions">resetActions</a></li><li><a href="global.html#SCHEMA">SCHEMA</a></li><li><a href="global.html#trouveClasse">trouveClasse</a></li><li><a href="global.html#update_liste_CE">update_liste_CE</a></li><li><a href="global.html#update_liste_CE1">update_liste_CE1</a></li><li><a href="global.html#update_liste_CE2">update_liste_CE2</a></li><li><a href="global.html#updateConsoleMiseEnForme">updateConsoleMiseEnForme</a></li><li><a href="global.html#videSuiveur">videSuiveur</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">classes/liaisons/CLASS-PivotMale.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>//Pivot animée, en attendant d'être placée
/*
var PivotMale = function()
{
	//==========================
	//Constructeur issu de l'heritage
	//==========================

		DemiLiaison.call(this);


	//==========================
	//Variables Membres
	//==========================
	
		//Définition
		this._genre = "male";	//Permet de discriminer la liaison "male" et la liaison "femelle"
		
		//Caractéristiques géométriques de la liaison
		this._rayon=10;
		this._longueurTige=20;
		


	//==========================
	//getter/setter
	//==========================

		// Rayon du cercle
		this.rayon=function(r)
		{
			if(typeof(r)!='undefined')
				{
					this._rayon=r;
					//Met à jour les couleur directement sur les graphismes
					// ... à faire
				}
			return this._rayon;
		}
		
		//Longueur tige
		this.longueurTige=function(l)
		{
			if(typeof(l)!='undefined')
				{
					this._longueurTige=l;
					//Met à jour les couleur directement sur les graphismes
					// ... à faire
				}
			return this._longueurTige;
		}

	//==========================
	//Autres fonctions membres
	//==========================

		//ECRASE L'ANCIENNE
		//Fonction qui met à jour la couleur des graphismes de la liaison (appelée avec this.couleur() en setter)
		this.updateCouleurGraphismes = function(_coul)
		{
			this._cercle.graphics._stroke.style=_coul;
			this._tige.graphics._stroke.style=_coul;
		}

		//ECRASE L'ANCIENNE
		//Fonction qui met à jour l'épaisseur des graphismes de la liaison (appelée avec this.epaisseur() en setter)
		this.updateEpaisseurGraphismes = function(_ep)
		{
			// À FAIRE
		}

		
		//ECRASE L'ANCIENNE
		//Ajoute (dans la grosse matrice K et F globale) la sous partie liée à la liaison
		this.remplisSysteme_liaison = function(K,F)
		{
			var O1L1 = this.O1L1();
			var O2L2 = this.demiSoeur().O1L1();
			var L1L2 = this.L1L2();
			var k = this._k
			var n1 = this.classe().numero(); //Numéro de la CE
			var n2 = this.demiSoeur().classe().numero() // Numéro de la CE de la demi-Soeur
		
		
			//NOTE : il faudra peut être condenser les lignes suivantes
					
			var KK = [	[-k,		0,		k*O1L1.y,								k,		0,		-k*O2L2.y],
					[0,		-k,		-k*O1L1.x,								0,		k,		k*O2L2.x],
					[O1L1.y*k,	-O1L1.x*k,	-k*(O1L1.y*O1L1.y+O1L1.x*O1L1.x+O1L1.y*L1L2.y-O1L1.x*L1L2.x),	-O1L1.y*k,	O1L1.x*k,	k*(O1L1.y*O2L2.y+O1L1.x*O2L2.x)]	
					]
					//[O1L1.y*k,	-O1L1.x*k,	-k*(O1L1.y*O1L1.y+O1L1.x*O1L1.x),	-O1L1.y*k,	O1L1.x*k,	k*(O1L1.y*O2L2.y+O1L1.x*O2L2.x)]	] //Ancien
					
			//var FF = [k*L1L2.x,k*L1L2.y,k*(O1L1.x*L1L2.y-O1L1.y*L1L2.x)]
			var FF = [-k*L1L2.x,	-k*L1L2.y,	k*(O1L1.y*L1L2.x-O1L1.x*L1L2.y)]
			

			
			//On recopie dans les bonnes lignes de K et F
			for(var i=0; i&lt;3 ; i++) // Pour chacune des 3 lignes
			{
				// Recopiage
				//K.set([3*n1+i,3*n1], K.get([3*n1+i,3*n1])+KK[i][0])
				K.ajouteVal( 3*n1+i , 3*n1,	KK[i][0])
				K.ajouteVal( 3*n1+i , 3*n1+1, KK[i][1])
				K.ajouteVal( 3*n1+i , 3*n1+2, KK[i][2])
				
				K.ajouteVal( 3*n1+i , 3*n2, 	KK[i][3])
				K.ajouteVal( 3*n1+i , 3*n2+1,	KK[i][4])
				K.ajouteVal( 3*n1+i , 3*n2+2,  KK[i][5])
				
				F.ajouteVal( 3*n1+i, FF[i])
				

			}
			
			
			// AJOUTE DE LA MOTORISATION
			if(this._pilotee &amp;&amp; ACTION == "simule")
			{
			
				var k = this._kRot //Raideur en rotation
				var signe = 1-2*(this._genre=="male")
				var deltaTheta0 = this.classe().lastPosition().theta-this.demiSoeur().classe().lastPosition().theta;	//Ecart initial
				var deltaTheta = this.classe().rotation-this.demiSoeur().classe().rotation;	//Ecart actuel
				K.ajouteVal(3*n1+2, 3*n1+2, -k)
				K.ajouteVal(3*n2+2, 3*n2+2, k)

				F.ajouteVal(3*n1+2, k*(deltaTheta-deltaTheta0+signe*this.consigneAngulaire()));//+k*)
			}
			
			return {K:KK,F:FF}
		}

		//Fonction qui sert de consigne angulaire, dans le cas où c'est une piloté
		this.consigneAngulaire=function()
		{
			var t=schema.tSimulation();
			//return -t*20;
			
			var omega = 2*math.pi*0.1 //vitesse angulaire
			return math.sin(omega*t)*30-30
		}

		
	//==========================
	//Graphismes
	//==========================
	
		this._cercle=new createjs.Shape();
		this._cercle.graphics.setStrokeStyle(this._epaisseur).beginStroke(this._couleur).beginFill("white").drawCircle(0, 0, this._rayon);
		this.addChild(this._cercle);
		
		this._tige=new createjs.Shape();
		this._tige.graphics.setStrokeStyle(this._epaisseur).beginStroke(this._couleur).moveTo(this._rayon,0).lineTo(this._rayon+this._longueurTige,0);
		this.addChild(this._tige);


		//Les shapes n'ont pas de bornes. Alors on va en créer
		
		this.setBounds(-this._rayon-this._longueurTige,-this._rayon-this._longueurTige,2*(this._rayon+this._longueurTige),2*(this._rayon+this._longueurTige))


}
PivotMale.prototype = Object.create(DemiLiaison.prototype);//On recopie le prototype de DemiLiaison
PivotMale.prototype.constructor = PivotMale;//On recopie le constructeur de Noeud dans son prototype

*/




/**
 * Demi-liaison "Pivot" désignée comme mâle
 * @extends DemiLiaison
 */
class PivotMale extends DemiLiaison
{


	// **********************************************************
	/*
	 * Constructeur
	 */
	constructor()
	{
		super()	// Rappelle le constructeur parent
		
		
		// Constantes ************
		this._genre = "male";	//Permet de discriminer la liaison "male" et la liaison "femelle"
		
		
		// Graphismes **********
		this._cercle=new createjs.Shape();
		this._cercle.graphics.setStrokeStyle(this._epaisseur).beginStroke(this._couleur).beginFill("white").drawCircle(0, 0, this._rayon);
		this.addChild(this._cercle);
		
		this._tige=new createjs.Shape();
		this._tige.graphics.setStrokeStyle(this._epaisseur).beginStroke(this._couleur).moveTo(this._rayon,0).lineTo(this._rayon+this._longueurTige,0);
		this.addChild(this._tige);


		//Les shapes n'ont pas de bornes. Alors on va en créer
		
		this.setBounds(-this._rayon-this._longueurTige,-this._rayon-this._longueurTige,2*(this._rayon+this._longueurTige),2*(this._rayon+this._longueurTige))
		
	}
	
	
	
	// MEMBRES **********************************************************
	
			/** Rayon du cercle qui dessine la liaison pivot, en px.
			@type {Number}  */
		_rayon = 10 ;
		
			/** Longueur de la tige (à partir du cercle), en px.
			@type {Number}  */
		_longueurTige = 20;
		
			/** Dessin le cercle
			@type {createjs.Shape}  */
		_cercle = new createjs.Shape();
		
			/** Dessin la tige
			@type {createjs.Shape}  */
		_tige = new createjs.Shape();
		
	// getter/setter ****************************************************

			/** GETTER / SETTER du rayon.
			@param {Number} r - [OPTIONNEL] Nouvelle valeur du rayon.
			@return {Number} Le rayon courant
			*/
		rayon(r)
		{
			if(typeof(r)!='undefined')
				{
					this._rayon=r;
					//Met à jour les dimensions directement sur les graphismes
					// ... à faire
				}
			return this._rayon;
		}
		
			/** GETTER / SETTER de la longueur de tige.
			@param {Number} l - [OPTIONNEL] Nouvelle valeur de la longueure.
			@return {Number} La longueur courante
			*/
		longueurTige(l)
		{
			if(typeof(l)!='undefined')
				{
					this._longueurTige=l;
					//Met à jour les dimensions directement sur les graphismes
					// ... à faire
				}
			return this._longueurTige;
		}
		
	//==========================
	//Autres fonctions membres
	//==========================

			/** Fonction qui met à jour la couleur des graphismes de la liaison (appelée avec this.couleur() en setter). Écrase la méthode abstraite mère.
			@param {String} _coul - Couleur
			*/
		updateCouleurGraphismes(_coul)
		{		
			this._cercle.graphics._stroke.style=_coul;
			this._tige.graphics._stroke.style=_coul;
		}
		
			/** Fonction qui met à jour l'épaisseur des graphismes de la liaison (appelée avec this.epaisseur() en setter). Écrase la méthode abstraite mère.
			@param {Number} _ep - Épaisseur
			*/
		updateEpaisseurGraphismes(_ep)
		{
			// À FAIRE
		}

			/** (ECRASE L A FONCTION ABSTRAITE) Ajoute (= modifie en place dans les grosses matrices K et F globales) la sous partie liée à la liaison. Écrase la méthode abstraite mère. Voir la démonstration à cette adresse : {@link http://cillon.allais.eu/ressources/demo_pivot.pdf}.
			@param {Array} K - Référence vers la matrice K générale du système global.
			@param {Array} F - Référence vers le vecteur F second membre du système global (vecteur en ligne, à une dimension)
			@return {Object} {K:   , F :} Objet représentant les PETITES matrices du système, liées à la liaison (Attention, ce ne sont pas les matrices globales)
			*/
		remplisSysteme_liaison(K,F)
		{
			var O1L1 = this.O1L1();
			var O2L2 = this.demiSoeur().O1L1();
			var L1L2 = this.L1L2();
			var k = this._k
			var n1 = this.classe().numero(); //Numéro de la CE
			var n2 = this.demiSoeur().classe().numero() // Numéro de la CE de la demi-Soeur
		
		
			//NOTE : il faudra peut être condenser les lignes suivantes
					
			var KK = [	[-k,		0,		k*O1L1.y,								k,		0,		-k*O2L2.y],
					[0,		-k,		-k*O1L1.x,								0,		k,		k*O2L2.x],
					[O1L1.y*k,	-O1L1.x*k,	-k*(O1L1.y*O1L1.y+O1L1.x*O1L1.x+O1L1.y*L1L2.y-O1L1.x*L1L2.x),	-O1L1.y*k,	O1L1.x*k,	k*(O1L1.y*O2L2.y+O1L1.x*O2L2.x)]	
					]
					//[O1L1.y*k,	-O1L1.x*k,	-k*(O1L1.y*O1L1.y+O1L1.x*O1L1.x),	-O1L1.y*k,	O1L1.x*k,	k*(O1L1.y*O2L2.y+O1L1.x*O2L2.x)]	] //Ancien
					
			//var FF = [k*L1L2.x,k*L1L2.y,k*(O1L1.x*L1L2.y-O1L1.y*L1L2.x)]
			var FF = [-k*L1L2.x,	-k*L1L2.y,	k*(O1L1.y*L1L2.x-O1L1.x*L1L2.y)]
			

			
			//On recopie dans les bonnes lignes de K et F
			for(var i=0; i&lt;3 ; i++) // Pour chacune des 3 lignes
			{
				// Recopiage
				//K.set([3*n1+i,3*n1], K.get([3*n1+i,3*n1])+KK[i][0])
				K.ajouteVal( 3*n1+i , 3*n1,	KK[i][0])
				K.ajouteVal( 3*n1+i , 3*n1+1, KK[i][1])
				K.ajouteVal( 3*n1+i , 3*n1+2, KK[i][2])
				
				K.ajouteVal( 3*n1+i , 3*n2, 	KK[i][3])
				K.ajouteVal( 3*n1+i , 3*n2+1,	KK[i][4])
				K.ajouteVal( 3*n1+i , 3*n2+2,  KK[i][5])
				
				F.ajouteVal( 3*n1+i, FF[i])
				

			}
			
			
			// AJOUTE DE LA MOTORISATION
			if(this._pilotee &amp;&amp; ACTION == "simule")
			{
			
				var k = this._kRot //Raideur en rotation
				var signe = 1-2*(this._genre=="male")
				var deltaTheta0 = this.classe().lastPosition().theta-this.demiSoeur().classe().lastPosition().theta;	//Ecart initial
				var deltaTheta = this.classe().rotation-this.demiSoeur().classe().rotation;	//Ecart actuel
				K.ajouteVal(3*n1+2, 3*n1+2, -k)
				K.ajouteVal(3*n2+2, 3*n2+2, k)

				F.ajouteVal(3*n1+2, k*(deltaTheta-deltaTheta0+signe*this.evalueConsigne()*57.29577951308232  ));//+k*) // 57,29... = conversion rad / deg
			}
			
			return {K:KK,F:FF}
		}
		
			/* Fonction qui sert de consigne angulaire, dans le cas où c'est une piloté.
			@retrun {Number} Valeur de la consigne, instantanée (à la date schema.tSimulation).
			*/
		/*consigneAngulaire()
		{
			var t=schema.tSimulation();
			//return -t*20;
			
			var omega = 2*math.pi*0.1 //vitesse angulaire
			return math.sin(omega*t)*30-30
		}*/

	

			/** Fonction qui calcule le score (= la distance) entre chaque demi liaison pivot (écrase la fonction abstraite)
			@ return {Number} Score
			*/
		getScore()
		{
			var V= this.L1L2();
			var ecart_distance = Math.sqrt(V.x*V.x+V.y*V.y); // en px
			var ecart_consigne = 0 // en °
			
			if(this._pilotee &amp;&amp; ACTION == "simule")
			{
				var deltaTheta0 = this.classe().lastPosition().theta-this.demiSoeur().classe().lastPosition().theta;	//Ecart initial
				var deltaTheta = this.classe().rotation-this.demiSoeur().classe().rotation;	//Ecart actuel
				var signe = 1-2*(this._genre=="male")
				ecart_consigne = Math.abs(deltaTheta-deltaTheta0+signe*this.evalueConsigne()*57.29577951308232);
			}
			return  ecart_distance + ecart_consigne;
		}
}


</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.7</a> on Fri Aug 12 2022 23:19:36 GMT+0200 (heure d’été d’Europe centrale) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
